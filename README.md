# MLOps

## 1. 머신러닝 파이프라인의 이해
### 1-1. 머신러닝 파이프라인의 필요성
- 생산성 향상
- 예측 가능한 품질
- 장애 대응능력 향상

> ML 시스템 개발 및 배포는 비교적 쉽고 빠르지만 해당 시스템을 유지하고 관리하는 비용은 매우 크다.

----

### 1-2. 머신러닝 문제의 특징
1) 쉬운 머신러닝 문제
    - 데이터의 변화가 slow (분기, 월 단위)
    - 모델 재학습이 다음에 의해 발생
        - 더 많은 데이터로 모델 성능 개선
        - 소프트웨어 혹은 시스템의 변화
    - 레이블링
        - 수집한 데이터
        - 크라우드 소싱
2) 어려운 머신러닝 문제
    - 데이터의 변화가 fast (주 단위 이하)
    - 모델 재학습이 다음에 의해 발생
        - 더 많은 데이터로 모델 성능 개선
        - 소프트웨어 혹은 시스템의 변화
        - **모델 성능 저하**
    - 레이블링
        - 수집한 데이터
        - 크라우드 소싱
        - **직접적인 피드백**

> ML은 본질적으로 실험
> 여러 사항을 변경 적용해봄으로써 최적의 솔루션을 찾는 것이 관건
> 항목별 효과 정도를 추적하고 코드 재사용을 극대화하며 재현성을 유지해야함

- ML 시스템에서의 테스팅과 배포는 SW 시스템에 비해 복잡하고 어려움
- ML 모델은 코딩뿐만 아니라 지속적으로 발생하는 Data Profile 탓에 성능 저하가 일어날 수 있음
    - 따라서 데이터의 통계피를 추적하고 모델의 온라인 성능을 모니터링하여 예상치를 벗어날 때 알림 발송 혹은 롤백이 필요

----

### 1-3. MLOps의 핵심 문제
1) 모델 학습 / 배포 Trigger
머신러닝 시스템은 다음과 같은 상황에서 모델의 학습과 배포를 수행
    - 요청 시: 파이프라인의 임시 수동 실행
    - 일정 기준: 레이블이 지정된 새 데이터는 매일, 매주 혹은 매월
    - 새로운 학습 데이터: 새 데이터가 들어오는 경우 모델의 재학습을 트리거
    - 모델 성능 저하시: 성능 저하가 눈에 띄는 경우 모델 재학습
    - 데이터 분포의 중요한 변화(Concept Drift)
        - 온라인 모델의 전체 성능을 평가하기는 어렵지만 예측을 수행하는 데 사용되는 feature의 데이터 분포에 큰 변화가 있다면, 모델이 오래되었음을 의미

2) 진화하는 데이터셋과 Metric
- CI/CD -> CT(Continuous Training)

----

### 1-4. MLOps 성숙도 레벨
1) MLOps 성숙도 레벨 0
- 수동, 스크립트 중심, 대화식(Interactive) 프로세스
- ML과 운영의 분리
- 드문 릴리즈 반복
- CI 없음
- CD 없음
- 배포 == 예측 서비스 그 자체
- Active 성능 모니터링의 부족
![image](https://user-images.githubusercontent.com/76294398/137730858-e155c8e9-8f8c-4fad-b37c-33b6dc88c42b.png)

<br>

2) MLOps 성숙도 레벨 1
- 빠른 실험
- 프로덕션 모델의 CT
- 실험 운영 환경의 조화
- 구성 요소 및 파이프라인을 위한 모듈화된 코드
- 지속적인 모델 제공
- 파이프라인 배포
![image](https://user-images.githubusercontent.com/76294398/137731065-ac02c284-0f34-4a56-b07c-f86467c3e0c5.png)

<br>

3) MLOps 성숙도 레벨 2
- Production에서 파이프라인의 빠르고 안정적인 업데이트를 위한 자동화된 CI/CD 시스템
- 자동화된 CI/CD 시스템을 통한 Feature Engineering, 모델 아키텍쳐 및 Hyper Parameter의 Opimization
![image](https://user-images.githubusercontent.com/76294398/137731484-fa5e4845-d74e-4df7-bf51-4971c009e77c.png)

<br>